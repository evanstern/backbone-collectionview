!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["underscore","backbone","backbone-layout","jquery"],b):a.BackboneCollectionView=b(a._,a.Backbone,a.BackboneLayout,a.jQuery)}(this,function(a,b,c){"use strict";var d=c.extend({tagName:"ul",initialize:function(a){a=a||{},c.prototype.initialize.call(this,a),a.ElementView&&(this.ElementView=a.ElementView),a.viewMapper&&(this.viewMapper=a.viewMapper),this.listenTo(this.collection,"add",this._add),this.listenTo(this.collection,"remove",this._remove),this.listenTo(this.collection,"reset",this._remove)},_add:function(a){var b=this.createView(a);this.registerView(b),this.renderElement(b)},_remove:function(){var b;if(2===arguments.length)b=this.viewManager.getViews();else{var c=arguments[0];b=this.viewManager.getViewsByModel(c)}a.each(b,function(a){this.unRegisterView(a),this.removeElement(a)},this)},registerView:function(a,b){c.prototype.registerView.call(this,a,b),a.model&&this.collection.add(a.model)},defaults:function(){return{collection:new(b.Collection.extend())}},_getView:function(a){return this.viewMapper?this.viewMapper(a):this.ElementView},getViewArgs:function(a){return{model:a}},createView:function(a){var b=this._getView(a);return new b(this.getViewArgs(a))},add:function(b){this.collection.add(b);var c=[];return b.length?(a.each(b,function(a){c.push(this.viewManager.getViewsByModel(a))},this),c=a.flatten(c)):c=this.viewManager.getViewsByModel(b),1===c.length?c[0]:c},remove:function(a){var b=this.viewManager.getViewsByModel(a);return this.collection.remove(a),1===b.length?b[0]:b},empty:function(){this.collection.reset()},renderElement:function(a){this.$el.append(a.render().el)},removeElement:function(a){a.close?a.close():a.remove()}});return d.VERSION="0.0.0",d});
//# sourceMappingURL=backbone-collectionview.map.js